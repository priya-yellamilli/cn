#include <stdio.h>

int main() {
    int data[20], code[30], n, p = 0, i, j, pos, sum, err = 0;
    printf("Enter number of data bits: ");
    scanf("%d", &n);

    printf("Enter data bits: ");
    for (i = 0; i < n; i++) scanf("%d", &data[i]);

    // Find number of parity bits
    while ((1 << p) < (n + p + 1)) p++;
    int m = n + p;

    // Insert parity bit positions (0)
    for (i = 0, j = 0; i < m; i++)
        code[i] = ((i + 1) & (i)) ? data[j++] : 0;

    // Calculate parity bits
    for (i = 0; i < p; i++) {
        pos = 1 << i; sum = 0;
        for (j = pos - 1; j < m; j += 2 * pos)
            for (int k = j; k < j + pos && k < m; k++)
                sum ^= code[k];
        code[pos - 1] = sum;
    }

    printf("Generated codeword: ");
    for (i = 0; i < m; i++) printf("%d", code[i]);

    printf("\nEnter received codeword: ");
    for (i = 0; i < m; i++) scanf("%d", &code[i]);

    // Error detection
    for (i = 0; i < p; i++) {
        pos = 1 << i; sum = 0;
        for (j = pos - 1; j < m; j += 2 * pos)
            for (int k = j; k < j + pos && k < m; k++)
                sum ^= code[k];
        if (sum) err += pos;
    }

    if (err == 0) printf("No error!\n");
    else printf("Error at bit position %d\n", err);
    return 0;
}




Enter number of data bits: 4
Enter data bits: 1 0 1 1
Generated codeword: 0110011
Enter received codeword: 0110011
No error!
